import{a as ut,b as ft}from"./chunk-WRTBEKRN.js";import{h as dt}from"./chunk-H5LORQQP.js";import{a as lt,d as ht,e as ct}from"./chunk-PRNJDQ6J.js";import{ca as rt,da as at}from"./chunk-F5ALC7SR.js";import{E as st}from"./chunk-NGTZY5Y2.js";import{Aa as V,Ac as b,Ba as H,Bc as D,Jc as it,La as Y,Lb as _,Ma as j,Na as $,Ob as T,Sb as W,Va as G,Xa as X,Zb as F,ab as K,cc as N,dc as y,dd as nt,ec as L,g as U,ia as k,ic as Z,id as ot,jd as O,oc as q,qc as S,ra as Q,ub as A,vb as P,wc as J,xc as tt,yc as et}from"./chunk-PHCOYEBV.js";var Ct=["canvas"];function gt(r,d){r&1&&L(0,"nz-spin")}function wt(r,d){if(r&1){let h=Z();N(0,"div")(1,"p",2),b(2),y(),N(3,"button",3),q("click",function(){j(h);let a=S(2);return $(a.reloadQRCode())}),L(4,"span",4),N(5,"span"),b(6),y()()()}if(r&2){let h=S(2);A(2),D(h.locale.expired),A(4),D(h.locale.refresh)}}function Et(r,d){if(r&1&&(N(0,"div")(1,"p",2),b(2),y()()),r&2){let h=S(2);A(2),D(h.locale.scanned)}}function pt(r,d){if(r&1&&(N(0,"div",1),T(1,gt,1,0,"nz-spin")(2,wt,7,2,"div")(3,Et,3,1,"div"),y()),r&2){let h,c=S();A(),F((h=c.nzStatus)==="loading"?1:h==="expired"?2:h==="scanned"?3:-1)}}function zt(r,d){r&1&&L(0,"canvas",null,0)}var z;(function(r){let d=(()=>{let n=class n{static encodeText(t,i){let e=r.QrSegment.makeSegments(t);return n.encodeSegments(e,i)}static encodeBinary(t,i){let e=r.QrSegment.makeBytes(t);return n.encodeSegments([e],i)}static encodeSegments(t,i,e=1,o=40,s=-1,f=!0){if(!(n.MIN_VERSION<=e&&e<=o&&o<=n.MAX_VERSION)||s<-1||s>7)throw new RangeError("Invalid value");let l,C;for(l=e;;l++){let g=n.getNumDataCodewords(l,i)*8,E=w.getTotalBits(t,l);if(E<=g){C=E;break}if(l>=o)throw new RangeError("Data too long")}for(let g of[n.Ecc.MEDIUM,n.Ecc.QUARTILE,n.Ecc.HIGH])f&&C<=n.getNumDataCodewords(l,g)*8&&(i=g);let m=[];for(let g of t){h(g.mode.modeBits,4,m),h(g.numChars,g.mode.numCharCountBits(l),m);for(let E of g.getData())m.push(E)}a(m.length==C);let I=n.getNumDataCodewords(l,i)*8;a(m.length<=I),h(0,Math.min(4,I-m.length),m),h(0,(8-m.length%8)%8,m),a(m.length%8==0);for(let g=236;m.length<I;g^=253)h(g,8,m);let p=[];for(;p.length*8<m.length;)p.push(0);return m.forEach((g,E)=>p[E>>>3]|=g<<7-(E&7)),new n(l,i,p,s)}constructor(t,i,e,o){if(this.version=t,this.errorCorrectionLevel=i,this.modules=[],this.isFunction=[],t<n.MIN_VERSION||t>n.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=t*4+17;let s=[];for(let l=0;l<this.size;l++)s.push(!1);for(let l=0;l<this.size;l++)this.modules.push(s.slice()),this.isFunction.push(s.slice());this.drawFunctionPatterns();let f=this.addEccAndInterleave(e);if(this.drawCodewords(f),o==-1){let l=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);let m=this.getPenaltyScore();m<l&&(o=C,l=m),this.applyMask(C)}}a(o>=0&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}getModule(t,i){return t>=0&&t<this.size&&i>=0&&i<this.size&&this.modules[i][t]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let t=this.getAlignmentPatternPositions(),i=t.length;for(let e=0;e<i;e++)for(let o=0;o<i;o++)e==0&&o==0||e==0&&o==i-1||e==i-1&&o==0||this.drawAlignmentPattern(t[e],t[o]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(t){let i=this.errorCorrectionLevel.formatBits<<3|t,e=i;for(let s=0;s<10;s++)e=e<<1^(e>>>9)*1335;let o=(i<<10|e)^21522;a(o>>>15==0);for(let s=0;s<=5;s++)this.setFunctionModule(8,s,c(o,s));this.setFunctionModule(8,7,c(o,6)),this.setFunctionModule(8,8,c(o,7)),this.setFunctionModule(7,8,c(o,8));for(let s=9;s<15;s++)this.setFunctionModule(14-s,8,c(o,s));for(let s=0;s<8;s++)this.setFunctionModule(this.size-1-s,8,c(o,s));for(let s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,c(o,s));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let t=this.version;for(let e=0;e<12;e++)t=t<<1^(t>>>11)*7973;let i=this.version<<12|t;a(i>>>18==0);for(let e=0;e<18;e++){let o=c(i,e),s=this.size-11+e%3,f=Math.floor(e/3);this.setFunctionModule(s,f,o),this.setFunctionModule(f,s,o)}}drawFinderPattern(t,i){for(let e=-4;e<=4;e++)for(let o=-4;o<=4;o++){let s=Math.max(Math.abs(o),Math.abs(e)),f=t+o,l=i+e;f>=0&&f<this.size&&l>=0&&l<this.size&&this.setFunctionModule(f,l,s!=2&&s!=4)}}drawAlignmentPattern(t,i){for(let e=-2;e<=2;e++)for(let o=-2;o<=2;o++)this.setFunctionModule(t+o,i+e,Math.max(Math.abs(o),Math.abs(e))!=1)}setFunctionModule(t,i,e){this.modules[i][t]=e,this.isFunction[i][t]=!0}addEccAndInterleave(t){let i=this.version,e=this.errorCorrectionLevel;if(t.length!=n.getNumDataCodewords(i,e))throw new RangeError("Invalid argument");let o=n.NUM_ERROR_CORRECTION_BLOCKS[e.ordinal][i],s=n.ECC_CODEWORDS_PER_BLOCK[e.ordinal][i],f=Math.floor(n.getNumRawDataModules(i)/8),l=o-f%o,C=Math.floor(f/o),m=[],I=n.reedSolomonComputeDivisor(s);for(let g=0,E=0;g<o;g++){let M=t.slice(E,E+C-s+(g<l?0:1));E+=M.length;let mt=n.reedSolomonComputeRemainder(M,I);g<l&&M.push(0),m.push(M.concat(mt))}let p=[];for(let g=0;g<m[0].length;g++)m.forEach((E,M)=>{(g!=C-s||M>=l)&&p.push(E[g])});return a(p.length==f),p}drawCodewords(t){if(t.length!=Math.floor(n.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let i=0;for(let e=this.size-1;e>=1;e-=2){e==6&&(e=5);for(let o=0;o<this.size;o++)for(let s=0;s<2;s++){let f=e-s,C=(e+1&2)==0?this.size-1-o:o;!this.isFunction[C][f]&&i<t.length*8&&(this.modules[C][f]=c(t[i>>>3],7-(i&7)),i++)}}a(i==t.length*8)}applyMask(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(let i=0;i<this.size;i++)for(let e=0;e<this.size;e++){let o;switch(t){case 0:o=(e+i)%2==0;break;case 1:o=i%2==0;break;case 2:o=e%3==0;break;case 3:o=(e+i)%3==0;break;case 4:o=(Math.floor(e/3)+Math.floor(i/2))%2==0;break;case 5:o=e*i%2+e*i%3==0;break;case 6:o=(e*i%2+e*i%3)%2==0;break;case 7:o=((e+i)%2+e*i%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[i][e]&&o&&(this.modules[i][e]=!this.modules[i][e])}}getPenaltyScore(){let t=0;for(let s=0;s<this.size;s++){let f=!1,l=0,C=[0,0,0,0,0,0,0];for(let m=0;m<this.size;m++)this.modules[s][m]==f?(l++,l==5?t+=n.PENALTY_N1:l>5&&t++):(this.finderPenaltyAddHistory(l,C),f||(t+=this.finderPenaltyCountPatterns(C)*n.PENALTY_N3),f=this.modules[s][m],l=1);t+=this.finderPenaltyTerminateAndCount(f,l,C)*n.PENALTY_N3}for(let s=0;s<this.size;s++){let f=!1,l=0,C=[0,0,0,0,0,0,0];for(let m=0;m<this.size;m++)this.modules[m][s]==f?(l++,l==5?t+=n.PENALTY_N1:l>5&&t++):(this.finderPenaltyAddHistory(l,C),f||(t+=this.finderPenaltyCountPatterns(C)*n.PENALTY_N3),f=this.modules[m][s],l=1);t+=this.finderPenaltyTerminateAndCount(f,l,C)*n.PENALTY_N3}for(let s=0;s<this.size-1;s++)for(let f=0;f<this.size-1;f++){let l=this.modules[s][f];l==this.modules[s][f+1]&&l==this.modules[s+1][f]&&l==this.modules[s+1][f+1]&&(t+=n.PENALTY_N2)}let i=0;for(let s of this.modules)i=s.reduce((f,l)=>f+(l?1:0),i);let e=this.size*this.size,o=Math.ceil(Math.abs(i*20-e*10)/e)-1;return a(o>=0&&o<=9),t+=o*n.PENALTY_N4,a(t>=0&&t<=2568888),t}getAlignmentPatternPositions(){if(this.version==1)return[];{let t=Math.floor(this.version/7)+2,i=this.version==32?26:Math.ceil((this.version*4+4)/(t*2-2))*2,e=[6];for(let o=this.size-7;e.length<t;o-=i)e.splice(1,0,o);return e}}static getNumRawDataModules(t){if(t<n.MIN_VERSION||t>n.MAX_VERSION)throw new RangeError("Version number out of range");let i=(16*t+128)*t+64;if(t>=2){let e=Math.floor(t/7)+2;i-=(25*e-10)*e-55,t>=7&&(i-=36)}return a(i>=208&&i<=29648),i}static getNumDataCodewords(t,i){return Math.floor(n.getNumRawDataModules(t)/8)-n.ECC_CODEWORDS_PER_BLOCK[i.ordinal][t]*n.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][t]}static reedSolomonComputeDivisor(t){if(t<1||t>255)throw new RangeError("Degree out of range");let i=[];for(let o=0;o<t-1;o++)i.push(0);i.push(1);let e=1;for(let o=0;o<t;o++){for(let s=0;s<i.length;s++)i[s]=n.reedSolomonMultiply(i[s],e),s+1<i.length&&(i[s]^=i[s+1]);e=n.reedSolomonMultiply(e,2)}return i}static reedSolomonComputeRemainder(t,i){let e=i.map(o=>0);for(let o of t){let s=o^e.shift();e.push(0),i.forEach((f,l)=>e[l]^=n.reedSolomonMultiply(f,s))}return e}static reedSolomonMultiply(t,i){if(t>>>8||i>>>8)throw new RangeError("Byte out of range");let e=0;for(let o=7;o>=0;o--)e=e<<1^(e>>>7)*285,e^=(i>>>o&1)*t;return a(e>>>8==0),e}finderPenaltyCountPatterns(t){let i=t[1];a(i<=this.size*3);let e=i>0&&t[2]==i&&t[3]==i*3&&t[4]==i&&t[5]==i;return(e&&t[0]>=i*4&&t[6]>=i?1:0)+(e&&t[6]>=i*4&&t[0]>=i?1:0)}finderPenaltyTerminateAndCount(t,i,e){return t&&(this.finderPenaltyAddHistory(i,e),i=0),i+=this.size,this.finderPenaltyAddHistory(i,e),this.finderPenaltyCountPatterns(e)}finderPenaltyAddHistory(t,i){i[0]==0&&(t+=this.size),i.pop(),i.unshift(t)}};n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];let u=n;return u})();r.QrCode=d;function h(u,n,R){if(n<0||n>31||u>>>n)throw new RangeError("Value out of range");for(let t=n-1;t>=0;t--)R.push(u>>>t&1)}function c(u,n){return(u>>>n&1)!=0}function a(u){if(!u)throw new Error("Assertion error")}let w=(()=>{let n=class n{static makeBytes(t){let i=[];for(let e of t)h(e,8,i);return new n(n.Mode.BYTE,t.length,i)}static makeNumeric(t){if(!n.isNumeric(t))throw new RangeError("String contains non-numeric characters");let i=[];for(let e=0;e<t.length;){let o=Math.min(t.length-e,3);h(parseInt(t.substring(e,e+o),10),o*3+1,i),e+=o}return new n(n.Mode.NUMERIC,t.length,i)}static makeAlphanumeric(t){if(!n.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let i=[],e;for(e=0;e+2<=t.length;e+=2){let o=n.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e))*45;o+=n.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e+1)),h(o,11,i)}return e<t.length&&h(n.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e)),6,i),new n(n.Mode.ALPHANUMERIC,t.length,i)}static makeSegments(t){return t==""?[]:n.isNumeric(t)?[n.makeNumeric(t)]:n.isAlphanumeric(t)?[n.makeAlphanumeric(t)]:[n.makeBytes(n.toUtf8ByteArray(t))]}static makeEci(t){let i=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)h(t,8,i);else if(t<16384)h(2,2,i),h(t,14,i);else if(t<1e6)h(6,3,i),h(t,21,i);else throw new RangeError("ECI assignment value out of range");return new n(n.Mode.ECI,0,i)}static isNumeric(t){return n.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return n.ALPHANUMERIC_REGEX.test(t)}constructor(t,i,e){if(this.mode=t,this.numChars=i,this.bitData=e,i<0)throw new RangeError("Invalid argument");this.bitData=e.slice()}getData(){return this.bitData.slice()}static getTotalBits(t,i){let e=0;for(let o of t){let s=o.mode.numCharCountBits(i);if(o.numChars>=1<<s)return 1/0;e+=4+s+o.bitData.length}return e}static toUtf8ByteArray(t){t=encodeURI(t);let i=[];for(let e=0;e<t.length;e++)t.charAt(e)!="%"?i.push(t.charCodeAt(e)):(i.push(parseInt(t.substring(e+1,e+3),16)),e+=2);return i}};n.NUMERIC_REGEX=/^[0-9]*$/,n.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,n.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let u=n;return u})();r.QrSegment=w})(z||(z={}));(function(r){var d;(function(h){let a=class a{constructor(u,n){this.ordinal=u,this.formatBits=n}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2);let c=a;h.Ecc=c})(d=r.QrCode||(r.QrCode={}))})(z||(z={}));(function(r){var d;(function(h){let a=class a{constructor(u,n){this.modeBits=u,this.numBitsCharCount=n}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]);let c=a;h.Mode=c})(d=r.QrSegment||(r.QrSegment={}))})(z||(z={}));var B=z,Rt={L:B.QrCode.Ecc.LOW,M:B.QrCode.Ecc.MEDIUM,Q:B.QrCode.Ecc.QUARTILE,H:B.QrCode.Ecc.HIGH},Mt=160,At=10,Nt=10,It="#000000",Pt="#FFFFFF",yt=40,St="M",Bt=(r,d=St)=>r?B.QrCode.encodeText(r,Rt[d]):null;function Ft(r,d,h=Mt,c=At,a=Nt,w=It,u=Pt,n=yt,R){let t=r.getContext("2d"),i=Lt(a);if(r.style.width=`${h}px`,r.style.height=`${h}px`,!d){t.fillStyle="rgba(0, 0, 0, 0)",t.fillRect(0,0,r.width,r.height);return}if(r.width=d.size*c+i[1]+i[3],r.height=d.size*c+i[0]+i[2],!R)x(t,r.width,r.height,c,u),v(t,d,c,i,u,w);else{let e=new Image;e.src=R,e.crossOrigin="anonymous",e.width=n*(r.width/h),e.height=n*(r.width/h),e.onload=()=>{x(t,r.width,r.height,c,u),v(t,d,c,i,u,w);let o=r.width/2-n*(r.width/h)/2;t.fillRect(o,o,n*(r.width/h),n*(r.width/h)),t.drawImage(e,o,o,n*(r.width/h),n*(r.width/h))},e.onerror=()=>{x(t,r.width,r.height,c,u),v(t,d,c,i,u,w)}}}function v(r,d,h,c,a,w){for(let u=0;u<d.size;u++)for(let n=0;n<d.size;n++)r.fillStyle=d.getModule(n,u)?w:a,r.fillRect(c[3]+n*h,c[0]+u*h,h,h)}function x(r,d,h,c,a){r.fillStyle=a,r.fillRect(0,0,d*c,h*c)}function Lt(r){return Array.isArray(r)?Array(4).fill(0).map((d,h)=>r[h%r.length]):[r,r,r,r]}var bt=(()=>{let d=class d{constructor(c,a,w,u){this.i18n=c,this.el=a,this.cdr=w,this.platformId=u,this.nzValue="",this.nzPadding=0,this.nzColor="#000000",this.nzBgColor="#FFFFFF",this.nzSize=160,this.nzIcon="",this.nzIconSize=40,this.nzBordered=!0,this.nzStatus="active",this.nzLevel="M",this.nzRefresh=new X,this.isBrowser=!0,this.destroy$=new U,this.isBrowser=st(this.platformId),this.cdr.markForCheck()}ngOnInit(){this.el.nativeElement.style.backgroundColor=this.nzBgColor,this.i18n.localeChange.pipe(k(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("QRCode"),this.cdr.markForCheck()})}ngOnChanges(c){let{nzValue:a,nzIcon:w,nzLevel:u,nzSize:n,nzIconSize:R,nzColor:t,nzPadding:i,nzBgColor:e}=c;(a||w||u||n||R||t||i||e)&&this.canvas&&this.drawCanvasQRCode(),e&&(this.el.nativeElement.style.backgroundColor=this.nzBgColor)}ngAfterViewInit(){this.drawCanvasQRCode()}reloadQRCode(){this.drawCanvasQRCode(),this.nzRefresh.emit("refresh")}drawCanvasQRCode(){this.canvas&&Ft(this.canvas.nativeElement,Bt(this.nzValue,this.nzLevel),this.nzSize,10,this.nzPadding,this.nzColor,this.nzBgColor,this.nzIconSize,this.nzIcon)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};d.\u0275fac=function(a){return new(a||d)(P(dt),P(G),P(nt),P(K))},d.\u0275cmp=V({type:d,selectors:[["nz-qrcode"]],viewQuery:function(a,w){if(a&1&&J(Ct,5),a&2){let u;tt(u=et())&&(w.canvas=u.first)}},hostAttrs:[1,"ant-qrcode"],hostVars:2,hostBindings:function(a,w){a&2&&W("ant-qrcode-border",w.nzBordered)},inputs:{nzValue:"nzValue",nzPadding:"nzPadding",nzColor:"nzColor",nzBgColor:"nzBgColor",nzSize:[2,"nzSize","nzSize",O],nzIcon:"nzIcon",nzIconSize:[2,"nzIconSize","nzIconSize",O],nzBordered:[2,"nzBordered","nzBordered",ot],nzStatus:"nzStatus",nzLevel:"nzLevel"},outputs:{nzRefresh:"nzRefresh"},exportAs:["nzQRCode"],standalone:!0,features:[_,Y,it],decls:2,vars:2,consts:[["canvas",""],[1,"ant-qrcode-mask"],[1,"ant-qrcode-expired"],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"]],template:function(a,w){a&1&&T(0,pt,4,1,"div",1)(1,zt,2,0,"canvas"),a&2&&(F(w.nzStatus!=="active"?0:-1),A(),F(w.isBrowser?1:-1))},dependencies:[ft,ut,ct,ht,lt,at,rt],encapsulation:2,changeDetection:0});let r=d;return r})(),Jt=(()=>{let d=class d{};d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=H({type:d}),d.\u0275inj=Q({imports:[bt]});let r=d;return r})();export{bt as a,Jt as b};
